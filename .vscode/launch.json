{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Debug Go Integration Tests",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/tests/go",
            "args": ["-v", "-timeout", "300s"],
            "env": {
                "RUN_INTEGRATION_TESTS": "1"
            },
            "buildFlags": "",
            "showLog": true,
            "trace": "verbose",
            "logOutput": "rpc",
            "dlvFlags": ["--listen=127.0.0.1:2345", "--headless=true", "--api-version=2", "--accept-multiclient"]
        },
        {
            "name": "Debug Specific Go Test",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/tests/go",
            "args": ["-v", "-timeout", "300s", "-run", "^${input:testPattern}$"],
            "env": {
                "RUN_INTEGRATION_TESTS": "1"
            },
            "buildFlags": "",
            "showLog": true,
            "trace": "verbose",
            "logOutput": "rpc"
        },
        {
            "name": "Debug Backend (Rust)",
            "type": "lldb",
            "request": "launch",
            "program": "${workspaceFolder}/target/debug/protosol-solana-api",
            "cwd": "${workspaceFolder}/api",
            "stopOnEntry": false,
            "args": [],
            "env": {
                "RUST_LOG": "debug",
                "SOLANA_RPC_URL": "http://localhost:8899"
            },
            "preLaunchTask": "cargo: build --bin protosol-solana-api"
        }
    ],
    "inputs": [
        {
            "id": "testPattern",
            "description": "Test pattern to run (e.g., TestComposableE2ESuite/Test_06)",
            "default": "TestComposableE2ESuite",
            "type": "promptString"
        }
    ]
}